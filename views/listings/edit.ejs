<% layout("/layouts/boilerplate") %>

<style>
    /* Full Page Layout Styles */
    .page-wrapper {
        max-width: 100%;
        padding: 0;
        margin: 0;
    }
    
    .full-width-container {
        max-width: 100%;
        padding: 2rem 3rem;
        background: linear-gradient(180deg, #f8f9fa 0%, #ffffff 100%);
        min-height: calc(100vh - 80px);
    }
    
    /* Hero Header Section */
    .page-header {
        background: linear-gradient(135deg, #003049 0%, #1a5276 50%, #003049 100%);
        padding: 3rem 3rem;
        margin: -2rem -3rem 2rem -3rem;
        border-radius: 0;
        position: relative;
        overflow: hidden;
    }
    
    .page-header::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="2"/></svg>');
        background-size: 200px 200px;
        opacity: 0.5;
    }
    
    .page-header h1 {
        color: white;
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        position: relative;
        z-index: 1;
    }
    
    .page-header p {
        color: rgba(255,255,255,0.85);
        font-size: 1.1rem;
        position: relative;
        z-index: 1;
    }
    
    .header-icon {
        position: absolute;
        right: 3rem;
        top: 50%;
        transform: translateY(-50%);
        font-size: 8rem;
        color: rgba(255,255,255,0.1);
    }
    
    /* Section Card Styles */
    .form-section {
        background: white;
        border-radius: 20px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 4px 20px rgba(0,0,0,0.06);
        border: 1px solid #eee;
        transition: all 0.3s ease;
    }
    
    .form-section:hover {
        box-shadow: 0 8px 30px rgba(0,0,0,0.1);
    }
    
    .section-header {
        display: flex;
        align-items: center;
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 2px solid #f0f0f0;
    }
    
    .section-icon {
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, #D62828 0%, #F77F00 100%);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 1rem;
        color: white;
        font-size: 1.3rem;
    }
    
    .section-title-group h3 {
        font-size: 1.4rem;
        font-weight: 700;
        color: #003049;
        margin: 0;
    }
    
    .section-title-group p {
        font-size: 0.9rem;
        color: #666;
        margin: 0;
    }
    
    /* Form Controls */
    .form-label {
        font-weight: 600;
        color: #003049;
        margin-bottom: 0.5rem;
        font-size: 0.95rem;
    }
    
    .form-control, .form-select {
        border-radius: 12px;
        border: 2px solid #e8e8e8;
        padding: 0.85rem 1.1rem;
        transition: all 0.3s ease;
        background: #fafafa;
    }
    
    .form-control:focus, .form-select:focus {
        border-color: #003049;
        box-shadow: 0 0 0 4px rgba(0, 48, 73, 0.1);
        background: white;
        outline: none;
    }
    
    /* Image Upload Styling */
    .image-upload-box {
        border: 2px dashed #ccc;
        border-radius: 16px;
        padding: 2rem;
        text-align: center;
        transition: all 0.3s ease;
        cursor: pointer;
        background: linear-gradient(145deg, #fafafa, #f0f0f0);
        min-height: 180px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
    
    .image-upload-box:hover {
        border-color: #D62828;
        background: linear-gradient(145deg, #fff5f5, #ffeaea);
    }
    
    .image-upload-box i {
        font-size: 3rem;
        color: #D62828;
        margin-bottom: 1rem;
    }
    
    .image-upload-box p {
        color: #666;
        margin: 0;
        font-weight: 500;
    }
    
    .original-image {
        border-radius: 16px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    
    /* Amenity Checkboxes - Grid Layout */
    .amenities-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 1rem;
    }
    
    .amenity-checkbox {
        position: relative;
    }
    
    .amenity-checkbox input {
        position: absolute;
        opacity: 0;
        cursor: pointer;
    }
    
    .amenity-checkbox label {
        display: flex;
        align-items: center;
        padding: 0.9rem 1.1rem;
        background: linear-gradient(145deg, #fafafa, #f0f0f0);
        border: 2px solid transparent;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        color: #003049;
        font-weight: 500;
    }
    
    .amenity-checkbox label:hover {
        background: #EAE2B7;
        transform: translateY(-2px);
    }
    
    .amenity-checkbox input:checked + label {
        background: linear-gradient(135deg, #D62828 0%, #F77F00 100%);
        color: white;
        border-color: #D62828;
        box-shadow: 0 4px 15px rgba(214, 40, 40, 0.3);
    }
    
    .amenity-checkbox label i {
        margin-right: 8px;
        font-size: 1rem;
        width: 20px;
        text-align: center;
    }
    
    /* Availability Toggle */
    .availability-toggle {
        display: flex;
        align-items: center;
        padding: 1rem;
        background: linear-gradient(145deg, #fafafa, #f0f0f0);
        border-radius: 12px;
        gap: 1rem;
    }
    
    .toggle-switch {
        position: relative;
        width: 50px;
        height: 26px;
    }
    
    .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }
    
    .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: .4s;
        border-radius: 34px;
    }
    
    .toggle-slider:before {
        position: absolute;
        content: "";
        height: 20px;
        width: 20px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
    }
    
    .toggle-switch input:checked + .toggle-slider {
        background: linear-gradient(135deg, #D62828 0%, #F77F00 100%);
    }
    
    .toggle-switch input:checked + .toggle-slider:before {
        transform: translateX(24px);
    }
    
    /* Submit Button */
    .submit-btn-container {
        display: flex;
        justify-content: center;
        margin-top: 2rem;
        padding: 2rem;
        background: white;
        border-radius: 20px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.06);
    }
    
    .submit-btn {
        background: linear-gradient(135deg, #D62828 0%, #F77F00 100%);
        border: none;
        border-radius: 50px;
        padding: 1rem 4rem;
        font-weight: 700;
        font-size: 1.1rem;
        transition: all 0.3s ease;
        box-shadow: 0 4px 20px rgba(214, 40, 40, 0.4);
        color: white;
    }
    
    .submit-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 30px rgba(214, 40, 40, 0.5);
    }
    
    .submit-btn i {
        margin-right: 0.5rem;
    }
    
    /* Night Input Styling */
    .night-input-group {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .night-input-group input {
        width: 80px;
        text-align: center;
    }
    
    .night-input-group span {
        color: #666;
        font-size: 0.9rem;
    }
    
    /* Validation Styling */
    .valid-feedback {
        color: #28a745;
        font-size: 0.85rem;
    }
    
    .invalid-feedback {
        color: #dc3545;
        font-size: 0.85rem;
    }
    
    /* Animation */
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .form-section {
        animation: fadeInUp 0.5s ease forwards;
    }
    
    /* Responsive */
    @media (max-width: 992px) {
        .full-width-container {
            padding: 1.5rem;
        }
        
        .page-header {
            padding: 2rem 1.5rem;
            margin: -1.5rem -1.5rem 1.5rem -1.5rem;
        }
        
        .page-header h1 {
            font-size: 2rem;
        }
        
        .header-icon {
            display: none;
        }
        
        .amenities-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }
    
    @media (max-width: 768px) {
        .page-header h1 {
            font-size: 1.5rem;
        }
        
        .form-section {
            padding: 1.5rem;
        }
        
        .section-header {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .section-icon {
            margin-bottom: 0.5rem;
        }
        
        .amenities-grid {
            grid-template-columns: 1fr;
        }
    }
    
    @media (max-width: 576px) {
        .full-width-container {
            padding: 1rem;
        }
        
        .page-header h1 {
            font-size: 1.3rem;
        }
        
        .submit-btn {
            width: 100%;
            padding: 1rem 2rem;
        }
    }
</style>

<div class="bg-pattern" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; background-image: radial-gradient(circle at 20% 80%, rgba(214, 40, 40, 0.03) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(0, 48, 73, 0.03) 0%, transparent 50%);"></div>

<div class="full-width-container">
    <!-- Hero Header -->
    <div class="page-header">
        <i class="fas fa-edit header-icon"></i>
        <h1><i class="fas fa-edit"></i> Edit Listing</h1>
        <p>Update your property details</p>
    </div>

    <form method="post" action="/listings/<%= listing._id %>?_method=PUT" class="needs-validation" novalidate enctype="multipart/form-data">
        
        <!-- Section 1: Basic Information -->
        <div class="form-section">
            <div class="section-header">
                <div class="section-icon">
                    <i class="fas fa-info-circle"></i>
                </div>
                <div class="section-title-group">
                    <h3>Basic Information</h3>
                    <p>Update essential details about your property</p>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="title" class="form-label">Title</label>
                    <input type="text" name="listing[title]" value="<%= listing.title %>" class="form-control" required>
                    <div class="valid-feedback">Looks good!</div>
                    <div class="invalid-feedback">Please enter a title</div>
                </div>

                <div class="col-md-6 mb-3">
                    <label for="category" class="form-label">Category</label>
                    <select class="form-select" id="category" name="listing[category]">
                        <option value="Rooms" <%= listing.category === 'Rooms' ? 'selected' : '' %>>Rooms</option>
                        <option value="Trending" <%= listing.category === 'Trending' ? 'selected' : '' %>>Trending</option>
                        <option value="Iconic_Cities" <%= listing.category === 'Iconic_Cities' ? 'selected' : '' %>>Iconic Cities</option>
                        <option value="Mountains" <%= listing.category === 'Mountains' ? 'selected' : '' %>>Mountains</option>
                        <option value="Castles" <%= listing.category === 'Castles' ? 'selected' : '' %>>Castles</option>
                        <option value="Amazing_Pool" <%= listing.category === 'Amazing_Pool' ? 'selected' : '' %>>Amazing Pool</option>
                        <option value="Camping" <%= listing.category === 'Camping' ? 'selected' : '' %>>Camping</option>
                        <option value="Farms" <%= listing.category === 'Farms' ? 'selected' : '' %>>Farms</option>
                        <option value="Arctic" <%= listing.category === 'Arctic' ? 'selected' : '' %>>Arctic</option>
                        <option value="Domes" <%= listing.category === 'Domes' ? 'selected' : '' %>>Domes</option>
                        <option value="House_Boats" <%= listing.category === 'House_Boats' ? 'selected' : '' %>>House Boats</option>
                    </select>
                </div>
            </div>

            <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <textarea name="listing[description]" class="form-control" rows="4" required><%= listing.description %></textarea>
                <div class="invalid-feedback">Please enter a description</div>
            </div>
        </div>

        <!-- Section 2: Images -->
        <div class="form-section">
            <div class="section-header">
                <div class="section-icon">
                    <i class="fas fa-images"></i>
                </div>
                <div class="section-title-group">
                    <h3>Property Images</h3>
                    <p>Update your property images</p>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Current Image</label><br>
                    <img src="<%= originalImageUrl %>" alt="listing_image" class="original-image" width="200">
                </div>

                <div class="col-md-6 mb-3">
                    <label for="image" class="form-label">Upload New Image (Optional)</label>
                    <div class="image-upload-box" id="imageUploadArea">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Click to upload new image</p>
                        <input type="file" name="listing[image]" class="form-control" style="display: none;" accept="image/*">
                    </div>
                </div>
            </div>

            <div class="mb-3">
                <label for="images" class="form-label">Additional Images (Optional)</label>
                <input type="file" name="listing[images]" class="form-control" multiple accept="image/*">
                <small class="text-muted">You can select multiple images</small>
            </div>
        </div>

        <!-- Section 3: Location & Pricing -->
        <div class="form-section">
            <div class="section-header">
                <div class="section-icon">
                    <i class="fas fa-map-marker-alt"></i>
                </div>
                <div class="section-title-group">
                    <h3>Location & Pricing</h3>
                    <p>Update location and nightly rate</p>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label for="price" class="form-label">Price per night (â‚¹)</label>
                    <input type="number" name="listing[price]" value="<%= listing.price %>" class="form-control" min="0" required>
                </div>

                <div class="col-md-4 mb-3">
                    <label for="country" class="form-label">Country</label>
                    <input type="text" name="listing[country]" value="<%= listing.country %>" class="form-control" required>
                </div>

                <div class="col-md-4 mb-3">
                    <label for="location" class="form-label">Location</label>
                    <input type="text" name="listing[location]" value="<%= listing.location %>" class="form-control" required>
                </div>
            </div>
            
            <!-- Location Map Picker -->
            <div class="mb-3 mt-3">
                <label class="form-label">Pick Location on Map</label>
                <small class="text-muted d-block mb-2">Click on the map to update your exact location</small>
                <div id="picker-map" style="height: 350px; width: 100%; border-radius: 12px; z-index: 1;"></div>
                <input type="hidden" id="geometryType" name="listing[geometry][type]" value="Point">
                <input type="hidden" id="latitude" name="listing[geometry][coordinates][1]" value="<%= listing.geometry && listing.geometry.coordinates ? listing.geometry.coordinates[1] : 20.5937 %>">
                <input type="hidden" id="longitude" name="listing[geometry][coordinates][0]" value="<%= listing.geometry && listing.geometry.coordinates ? listing.geometry.coordinates[0] : 78.9629 %>">
                <small class="text-muted mt-2 d-block">
                    <i class="fas fa-info-circle"></i> Coordinates: 
                    <span id="coordinatesDisplay">Lat: <%= listing.geometry && listing.geometry.coordinates ? listing.geometry.coordinates[1].toFixed(6) : '20.5937' %>, Lng: <%= listing.geometry && listing.geometry.coordinates ? listing.geometry.coordinates[0].toFixed(6) : '78.9629' %></span>
                </small>
            </div>
        </div>

        <!-- Section 4: Property Details -->
        <div class="form-section">
            <div class="section-header">
                <div class="section-icon">
                    <i class="fas fa-bed"></i>
                </div>
                <div class="section-title-group">
                    <h3>Property Details</h3>
                    <p>Update capacity and room details</p>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-3 col-sm-6 mb-3">
                    <label for="guests" class="form-label"><i class="fas fa-users"></i> Guests</label>
                    <input type="number" name="listing[guests]" value="<%= listing.guests || 1 %>" class="form-control" min="1" max="20" required>
                </div>

                <div class="col-md-3 col-sm-6 mb-3">
                    <label for="bedrooms" class="form-label"><i class="fas fa-door-open"></i> Bedrooms</label>
                    <input type="number" name="listing[bedrooms]" value="<%= listing.bedrooms || 1 %>" class="form-control" min="0" max="20">
                </div>

                <div class="col-md-3 col-sm-6 mb-3">
                    <label for="beds" class="form-label"><i class="fas fa-bed"></i> Beds</label>
                    <input type="number" name="listing[beds]" value="<%= listing.beds || 1 %>" class="form-control" min="0" max="20">
                </div>

                <div class="col-md-3 col-sm-6 mb-3">
                    <label for="baths" class="form-label"><i class="fas fa-bath"></i> Baths</label>
                    <input type="number" name="listing[baths]" value="<%= listing.baths || 1 %>" class="form-control" min="0" max="20" step="0.5">
                </div>
            </div>
        </div>

        <!-- Section 5: Amenities -->
        <div class="form-section">
            <div class="section-header">
                <div class="section-icon">
                    <i class="fas fa-concierge-bell"></i>
                </div>
                <div class="section-title-group">
                    <h3>Amenities</h3>
                    <p>Select available amenities</p>
                </div>
            </div>
            
            <div class="amenities-grid">
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-wifi" name="listing[amenities]" value="WiFi" <%= listing.amenities && listing.amenities.includes('WiFi') ? 'checked' : '' %>>
                    <label for="amenity-wifi"><i class="fas fa-wifi"></i> WiFi</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-kitchen" name="listing[amenities]" value="Kitchen" <%= listing.amenities && listing.amenities.includes('Kitchen') ? 'checked' : '' %>>
                    <label for="amenity-kitchen"><i class="fas fa-utensils"></i> Kitchen</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-parking" name="listing[amenities]" value="Parking" <%= listing.amenities && listing.amenities.includes('Parking') ? 'checked' : '' %>>
                    <label for="amenity-parking"><i class="fas fa-parking"></i> Parking</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-pool" name="listing[amenities]" value="Pool" <%= listing.amenities && listing.amenities.includes('Pool') ? 'checked' : '' %>>
                    <label for="amenity-pool"><i class="fas fa-swimming-pool"></i> Pool</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-ac" name="listing[amenities]" value="Air Conditioning" <%= listing.amenities && listing.amenities.includes('Air Conditioning') ? 'checked' : '' %>>
                    <label for="amenity-ac"><i class="fas fa-snowflake"></i> AC</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-heating" name="listing[amenities]" value="Heating" <%= listing.amenities && listing.amenities.includes('Heating') ? 'checked' : '' %>>
                    <label for="amenity-heating"><i class="fas fa-fire"></i> Heating</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-washer" name="listing[amenities]" value="Washer" <%= listing.amenities && listing.amenities.includes('Washer') ? 'checked' : '' %>>
                    <label for="amenity-washer"><i class="fas fa-washer"></i> Washer</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-dryer" name="listing[amenities]" value="Dryer" <%= listing.amenities && listing.amenities.includes('Dryer') ? 'checked' : '' %>>
                    <label for="amenity-dryer"><i class="fas fa-dryer"></i> Dryer</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-tv" name="listing[amenities]" value="TV" <%= listing.amenities && listing.amenities.includes('TV') ? 'checked' : '' %>>
                    <label for="amenity-tv"><i class="fas fa-tv"></i> TV</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-gym" name="listing[amenities]" value="Gym" <%= listing.amenities && listing.amenities.includes('Gym') ? 'checked' : '' %>>
                    <label for="amenity-gym"><i class="fas fa-dumbbell"></i> Gym</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-hottub" name="listing[amenities]" value="Hot Tub" <%= listing.amenities && listing.amenities.includes('Hot Tub') ? 'checked' : '' %>>
                    <label for="amenity-hottub"><i class="fas fa-hot-tub"></i> Hot Tub</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-pets" name="listing[amenities]" value="Pets Allowed" <%= listing.amenities && listing.amenities.includes('Pets Allowed') ? 'checked' : '' %>>
                    <label for="amenity-pets"><i class="fas fa-paw"></i> Pets</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-smoking" name="listing[amenities]" value="Smoking Allowed" <%= listing.amenities && listing.amenities.includes('Smoking Allowed') ? 'checked' : '' %>>
                    <label for="amenity-smoking"><i class="fas fa-smoking"></i> Smoking</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-wheelchair" name="listing[amenities]" value="Wheelchair Accessible" <%= listing.amenities && listing.amenities.includes('Wheelchair Accessible') ? 'checked' : '' %>>
                    <label for="amenity-wheelchair"><i class="fas fa-wheelchair"></i> Wheelchair</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-elevator" name="listing[amenities]" value="Elevator" <%= listing.amenities && listing.amenities.includes('Elevator') ? 'checked' : '' %>>
                    <label for="amenity-elevator"><i class="fas fa-elevator"></i> Elevator</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-fireplace" name="listing[amenities]" value="Fireplace" <%= listing.amenities && listing.amenities.includes('Fireplace') ? 'checked' : '' %>>
                    <label for="amenity-fireplace"><i class="fas fa-fire-alt"></i> Fireplace</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-beachfront" name="listing[amenities]" value="Beachfront" <%= listing.amenities && listing.amenities.includes('Beachfront') ? 'checked' : '' %>>
                    <label for="amenity-beachfront"><i class="fas fa-umbrella-beach"></i> Beachfront</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-mountain" name="listing[amenities]" value="Mountain View" <%= listing.amenities && listing.amenities.includes('Mountain View') ? 'checked' : '' %>>
                    <label for="amenity-mountain"><i class="fas fa-mountain"></i> Mountain View</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-garden" name="listing[amenities]" value="Garden" <%= listing.amenities && listing.amenities.includes('Garden') ? 'checked' : '' %>>
                    <label for="amenity-garden"><i class="fas fa-leaf"></i> Garden</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-bbq" name="listing[amenities]" value="BBQ" <%= listing.amenities && listing.amenities.includes('BBQ') ? 'checked' : '' %>>
                    <label for="amenity-bbq"><i class="fas fa-bacon"></i> BBQ</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-coffee" name="listing[amenities]" value="Coffee Maker" <%= listing.amenities && listing.amenities.includes('Coffee Maker') ? 'checked' : '' %>>
                    <label for="amenity-coffee"><i class="fas fa-coffee"></i> Coffee</label>
                </div>
                <div class="amenity-checkbox">
                    <input type="checkbox" id="amenity-workspace" name="listing[amenities]" value="Workspace" <%= listing.amenities && listing.amenities.includes('Workspace') ? 'checked' : '' %>>
                    <label for="amenity-workspace"><i class="fas fa-laptop"></i> Workspace</label>
                </div>
            </div>
        </div>

        <!-- Section 6: Availability Settings -->
        <div class="form-section">
            <div class="section-header">
                <div class="section-icon">
                    <i class="fas fa-calendar-check"></i>
                </div>
                <div class="section-title-group">
                    <h3>Availability Settings</h3>
                    <p>Configure booking availability</p>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label class="form-label">Booking Status</label>
                    <div class="availability-toggle">
                        <label class="toggle-switch">
                            <input type="checkbox" id="available" name="listing[availability][available]" value="true" <%= listing.availability && listing.availability.available === true ? 'checked' : '' %>>
                            <span class="toggle-slider"></span>
                        </label>
                        <span>Available for booking</span>
                    </div>
                </div>

                <div class="col-md-4 mb-3">
                    <label for="minNights" class="form-label">Minimum Nights</label>
                    <div class="night-input-group">
                        <input type="number" name="listing[availability][minNights]" class="form-control" value="<%= listing.availability && listing.availability.minNights ? listing.availability.minNights : 1 %>" min="1" max="365">
                        <span>nights</span>
                    </div>
                </div>

                <div class="col-md-4 mb-3">
                    <label for="maxNights" class="form-label">Maximum Nights</label>
                    <div class="night-input-group">
                        <input type="number" name="listing[availability][maxNights]" class="form-control" value="<%= listing.availability && listing.availability.maxNights ? listing.availability.maxNights : 365 %>" min="1" max="365">
                        <span>nights</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Submit Button -->
        <div class="submit-btn-container">
            <button type="submit" class="submit-btn">
                <i class="fas fa-save"></i> Update Listing
            </button>
        </div>
    </form>
</div>

<script>
    // Image Upload Functionality
    const imageUploadArea = document.getElementById('imageUploadArea');
    if (imageUploadArea) {
        const fileInput = imageUploadArea.querySelector('input[type="file"]');
        
        imageUploadArea.addEventListener('click', function() {
            fileInput.click();
        });

        fileInput.addEventListener('change', function() {
            if (this.files.length > 0) {
                imageUploadArea.style.borderColor = '#D62828';
                imageUploadArea.style.background = 'linear-gradient(145deg, #fff5f5, #ffeaea)';
            }
        });
    }
</script>
